<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · TestPicker.jl</title><meta name="title" content="Home · TestPicker.jl"/><meta property="og:title" content="Home · TestPicker.jl"/><meta property="twitter:title" content="Home · TestPicker.jl"/><meta name="description" content="Documentation for TestPicker.jl."/><meta property="og:description" content="Documentation for TestPicker.jl."/><meta property="twitter:description" content="Documentation for TestPicker.jl."/><meta property="og:url" content="https://theogf.github.io/TestPicker.jl/"/><meta property="twitter:url" content="https://theogf.github.io/TestPicker.jl/"/><link rel="canonical" href="https://theogf.github.io/TestPicker.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>TestPicker.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/theogf/TestPicker.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/theogf/TestPicker.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="TestPicker"><a class="docs-heading-anchor" href="#TestPicker">TestPicker</a><a id="TestPicker-1"></a><a class="docs-heading-anchor-permalink" href="#TestPicker" title="Permalink"></a></h1><p>Documentation for <a href="https://github.com/theogf/TestPicker.jl">TestPicker</a>.</p><ul><li><a href="#TestPicker.INTERFACES"><code>TestPicker.INTERFACES</code></a></li><li><a href="#TestPicker.LATEST_EVAL"><code>TestPicker.LATEST_EVAL</code></a></li><li><a href="#TestPicker.TESTENV_CACHE"><code>TestPicker.TESTENV_CACHE</code></a></li><li><a href="#TestPicker.TESTMODE_TRIGGER"><code>TestPicker.TESTMODE_TRIGGER</code></a></li><li><a href="#TestPicker.EvalTest"><code>TestPicker.EvalTest</code></a></li><li><a href="#TestPicker.QueryType"><code>TestPicker.QueryType</code></a></li><li><a href="#TestPicker.StdTestset"><code>TestPicker.StdTestset</code></a></li><li><a href="#TestPicker.SyntaxBlock"><code>TestPicker.SyntaxBlock</code></a></li><li><a href="#TestPicker.TestBlockInfo"><code>TestPicker.TestBlockInfo</code></a></li><li><a href="#TestPicker.TestBlockInterface"><code>TestPicker.TestBlockInterface</code></a></li><li><a href="#TestPicker.TestInfo"><code>TestPicker.TestInfo</code></a></li><li><a href="#TestPicker.add_interface!-Tuple{TestBlockInterface}"><code>TestPicker.add_interface!</code></a></li><li><a href="#TestPicker.blocklabel-Union{Tuple{T}, Tuple{T, JuliaSyntax.SyntaxNode}} where T&lt;:TestBlockInterface"><code>TestPicker.blocklabel</code></a></li><li><a href="#TestPicker.build_info_to_syntax-Tuple{Vector{&lt;:TestBlockInterface}, AbstractString, AbstractVector{&lt;:AbstractString}}"><code>TestPicker.build_info_to_syntax</code></a></li><li><a href="#TestPicker.clean_results_file-Tuple{Pkg.Types.PackageSpec}"><code>TestPicker.clean_results_file</code></a></li><li><a href="#TestPicker.clean_source-Tuple{LineNumberNode}"><code>TestPicker.clean_source</code></a></li><li><a href="#TestPicker.clear_testenv_cache-Tuple{}"><code>TestPicker.clear_testenv_cache</code></a></li><li><a href="#TestPicker.create_repl_test_mode-Tuple{REPL.AbstractREPL, REPL.LineEdit.Prompt}"><code>TestPicker.create_repl_test_mode</code></a></li><li><a href="#TestPicker.current_pkg-Tuple{}"><code>TestPicker.current_pkg</code></a></li><li><a href="#TestPicker.eval_in_module-Tuple{TestPicker.EvalTest, Pkg.Types.PackageSpec}"><code>TestPicker.eval_in_module</code></a></li><li><a href="#TestPicker.expr_transform-Tuple{TestBlockInterface, Expr}"><code>TestPicker.expr_transform</code></a></li><li><a href="#TestPicker.fzf_testblock-Tuple{Vector{&lt;:TestBlockInterface}, AbstractString, AbstractString}"><code>TestPicker.fzf_testblock</code></a></li><li><a href="#TestPicker.fzf_testfile-Tuple{AbstractString}"><code>TestPicker.fzf_testfile</code></a></li><li><a href="#TestPicker.get_matching_files-Tuple{AbstractString, AbstractVector{&lt;:AbstractString}}"><code>TestPicker.get_matching_files</code></a></li><li><a href="#TestPicker.get_preview_dimension"><code>TestPicker.get_preview_dimension</code></a></li><li><a href="#TestPicker.get_test_files"><code>TestPicker.get_test_files</code></a></li><li><a href="#TestPicker.get_testblocks-Tuple{Vector{&lt;:TestBlockInterface}, AbstractString}"><code>TestPicker.get_testblocks</code></a></li><li><a href="#TestPicker.identify_query-Tuple{AbstractString}"><code>TestPicker.identify_query</code></a></li><li><a href="#TestPicker.init_test_repl_mode-Tuple{REPL.AbstractREPL}"><code>TestPicker.init_test_repl_mode</code></a></li><li><a href="#TestPicker.ispreamble-Tuple{JuliaSyntax.SyntaxNode}"><code>TestPicker.ispreamble</code></a></li><li><a href="#TestPicker.istestblock-Union{Tuple{T}, Tuple{T, JuliaSyntax.SyntaxNode}} where T&lt;:TestBlockInterface"><code>TestPicker.istestblock</code></a></li><li><a href="#TestPicker.pick_testblock-Tuple{Dict{String, TestPicker.TestBlockInfo}, AbstractString, AbstractString}"><code>TestPicker.pick_testblock</code></a></li><li><a href="#TestPicker.preamble-Tuple{TestBlockInterface}"><code>TestPicker.preamble</code></a></li><li><a href="#TestPicker.prepend_ex-Tuple{Any, Expr}"><code>TestPicker.prepend_ex</code></a></li><li><a href="#TestPicker.prepend_preamble_statements-Tuple{TestBlockInterface, Vector{Expr}}"><code>TestPicker.prepend_preamble_statements</code></a></li><li><a href="#TestPicker.preview_content-Tuple{Test.Error}"><code>TestPicker.preview_content</code></a></li><li><a href="#TestPicker.remove_ansi-Tuple{AbstractString}"><code>TestPicker.remove_ansi</code></a></li><li><a href="#TestPicker.replace_interface!-Tuple{TestBlockInterface}"><code>TestPicker.replace_interface!</code></a></li><li><a href="#TestPicker.run_test_file-Tuple{AbstractString, Pkg.Types.PackageSpec}"><code>TestPicker.run_test_file</code></a></li><li><a href="#TestPicker.run_test_files-Tuple{AbstractVector{&lt;:AbstractString}, Pkg.Types.PackageSpec}"><code>TestPicker.run_test_files</code></a></li><li><a href="#TestPicker.save_test_results-Tuple{Test.TestSetException, TestPicker.TestInfo, Pkg.Types.PackageSpec}"><code>TestPicker.save_test_results</code></a></li><li><a href="#TestPicker.select_test_files"><code>TestPicker.select_test_files</code></a></li><li><a href="#TestPicker.separator-Tuple{}"><code>TestPicker.separator</code></a></li><li><a href="#TestPicker.test_mode_do_cmd-Tuple{REPL.AbstractREPL, String}"><code>TestPicker.test_mode_do_cmd</code></a></li><li><a href="#TestPicker.testblock_list-Tuple{Vector{&lt;:AbstractString}, Dict{TestPicker.TestBlockInfo, TestPicker.SyntaxBlock}, Dict{String, TestPicker.TestBlockInfo}, Pkg.Types.PackageSpec}"><code>TestPicker.testblock_list</code></a></li><li><a href="#TestPicker.visualize_test_results"><code>TestPicker.visualize_test_results</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.INTERFACES" href="#TestPicker.INTERFACES"><code>TestPicker.INTERFACES</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">INTERFACES</code></pre><p>Global collection of test block interfaces used by TestPicker.</p><p>Contains all registered <a href="#TestPicker.TestBlockInterface"><code>TestBlockInterface</code></a> implementations that TestPicker uses to recognize and parse different types of test blocks. By default includes <a href="#TestPicker.StdTestset"><code>StdTestset</code></a> for standard <code>@testset</code> blocks.</p><p><strong>Type</strong></p><p><code>Vector{TestBlockInterface}</code>: Collection of interface implementations</p><p><strong>Default Contents</strong></p><ul><li><a href="#TestPicker.StdTestset"><code>StdTestset</code></a>: Handles standard Julia <code>@testset</code> blocks</li></ul><p><strong>Modification</strong></p><p>Use <a href="#TestPicker.add_interface!-Tuple{TestBlockInterface}"><code>add_interface!</code></a> to register additional test block interfaces:</p><pre><code class="language-julia hljs"># Add support for custom test blocks
add_interface!(MyCustomTestInterface())</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/TestPicker.jl#L95-L117">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.LATEST_EVAL" href="#TestPicker.LATEST_EVAL"><code>TestPicker.LATEST_EVAL</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">LATEST_EVAL</code></pre><p>Global reference to the most recently executed test evaluations.</p><p>Stores a vector of <a href="#TestPicker.EvalTest"><code>EvalTest</code></a> objects representing the last set of tests that were executed. This allows for re-running the same tests without going through the selection interface again.</p><p><strong>Type</strong></p><p><code>Ref{Union{Nothing,Vector{EvalTest}}}</code>: Initially <code>nothing</code>, becomes a vector after first test execution</p><p><strong>Usage</strong></p><ul><li>Set automatically when tests are executed</li><li>Can be re-run using the <code>-</code> command in test mode</li><li>Cleared when new test files are executed (not individual test blocks)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># In test mode REPL:
# Run some tests first, then:
test&gt; -    # Re-runs the last executed tests</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/TestPicker.jl#L61-L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.TESTENV_CACHE" href="#TestPicker.TESTENV_CACHE"><code>TestPicker.TESTENV_CACHE</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TESTENV_CACHE</code></pre><p>Cache for TestEnv temporary environments to avoid triggering recompilation on every test run.</p><p>This constant stores a mapping from <code>PackageSpec</code> objects to their corresponding temporary test environment paths. Reusing these environments improves performance by avoiding the overhead of recreating test environments.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/eval.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.TESTMODE_TRIGGER" href="#TestPicker.TESTMODE_TRIGGER"><code>TestPicker.TESTMODE_TRIGGER</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Trigger key to get into test mode.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/repl.jl#L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.EvalTest" href="#TestPicker.EvalTest"><code>TestPicker.EvalTest</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">EvalTest</code></pre><p>Container for executable test code and its associated metadata.</p><p>Combines a Julia expression representing test code with metadata about its source and context. Used throughout TestPicker for tracking and executing tests.</p><p><strong>Fields</strong></p><ul><li><code>ex::Expr</code>: The executable test expression (may include preamble and wrapper code)</li><li><code>info::TestInfo</code>: Metadata about the test&#39;s source and identification</li></ul><p><strong>Usage</strong></p><p><code>EvalTest</code> objects are created during test parsing and stored in <a href="#TestPicker.LATEST_EVAL"><code>LATEST_EVAL</code></a> for re-execution and result tracking.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/TestPicker.jl#L40-L55">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.QueryType" href="#TestPicker.QueryType"><code>TestPicker.QueryType</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">QueryType</code></pre><p>Enumeration of different types of test queries supported by the test REPL mode.</p><p><strong>Values</strong></p><ul><li><code>TestFileQuery</code>: Query for running tests from specific files</li><li><code>TestsetQuery</code>: Query for running specific test sets (format: &quot;file:testset&quot;)</li><li><code>LatestEval</code>: Re-run the most recently evaluated tests (triggered by &quot;-&quot;)</li><li><code>InspectResults</code>: View test results visualization (triggered by &quot;?&quot;)</li><li><code>UnmatchedQuery</code>: Query that couldn&#39;t be parsed or is invalid</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/repl.jl#L141-L152">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.StdTestset" href="#TestPicker.StdTestset"><code>TestPicker.StdTestset</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StdTestset &lt;: TestBlockInterface</code></pre><p>Standard implementation of <a href="#TestPicker.TestBlockInterface"><code>TestBlockInterface</code></a> for <code>@testset</code> blocks from Julia&#39;s <code>Test.jl</code> standard library.</p><p>This is the built-in interface for recognizing and processing standard Julia test sets. It handles <code>@testset</code> blocks commonly used in Julia testing and provides the necessary preamble to load the Test.jl package.</p><p><strong>Behavior</strong></p><ul><li>Recognizes syntax nodes that start with <code>@testset</code></li><li>Extracts test set names as labels for display</li><li>Automatically includes <code>using Test</code> as preamble</li><li>No expression transformation (uses default identity)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># This testset would be recognized:
@testset &quot;Basic arithmetic tests&quot; begin
    @test 1 + 1 == 2
    @test 2 * 3 == 6
end

# The label would be: &quot;Basic arithmetic tests&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblockinterface.jl#L224-L249">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.SyntaxBlock" href="#TestPicker.SyntaxBlock"><code>TestPicker.SyntaxBlock</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SyntaxBlock</code></pre><p>A container for a test block and its associated preamble statements.</p><p>Contains all the necessary components to execute a test block, including any setup  code that needs to run beforehand. Can be easily converted into an evaluatable expression.</p><p><strong>Fields</strong></p><ul><li><code>preamble::Vector{SyntaxNode}</code>: Collection of preamble statements (imports, assignments, etc.)</li><li><code>testblock::SyntaxNode</code>: The actual test block node (e.g., <code>@testset</code>)</li><li><code>interface::TestBlockInterface</code>: The interface implementation used to parse this block</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblock.jl#L41-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.TestBlockInfo" href="#TestPicker.TestBlockInfo"><code>TestPicker.TestBlockInfo</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TestBlockInfo</code></pre><p>Metadata container for a test block, including its location and identification information.</p><p>Stores essential information about a test block&#39;s location within a file and provides a label for identification and display purposes.</p><p><strong>Fields</strong></p><ul><li><code>label::String</code>: Human-readable label for the test block (e.g., test set name)</li><li><code>file_name::String</code>: Name of the file containing the test block</li><li><code>line_start::Int</code>: Starting line number of the test block (1-indexed)</li><li><code>line_end::Int</code>: Ending line number of the test block (1-indexed)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblock.jl#L137-L150">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.TestBlockInterface" href="#TestPicker.TestBlockInterface"><code>TestPicker.TestBlockInterface</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TestBlockInterface</code></pre><p>Abstract interface for defining and recognizing different types of test blocks in Julia code.</p><p>The <code>TestBlockInterface</code> allows you to define different types of test blocks that you would like <code>TestPicker</code> to find and evaluate. The interface is relatively simple and flexible.</p><p><strong>Implementation Requirements</strong></p><p>To create a custom test block interface, define a subtype and implement the required methods:</p><pre><code class="language-julia hljs">struct MyTestBlock &lt;: TestBlockInterface end</code></pre><p><strong>Required Methods</strong></p><ul><li><a href="#TestPicker.istestblock-Union{Tuple{T}, Tuple{T, JuliaSyntax.SyntaxNode}} where T&lt;:TestBlockInterface"><code>istestblock(::MyTestBlock, node::SyntaxNode)::Bool</code></a>: Determines whether a given <code>SyntaxNode</code> represents a test block</li><li><a href="#TestPicker.blocklabel-Union{Tuple{T}, Tuple{T, JuliaSyntax.SyntaxNode}} where T&lt;:TestBlockInterface"><code>blocklabel(::MyTestBlock, node::SyntaxNode)::String</code></a>: Produces a (preferably) unique label for filtering and display</li></ul><p><strong>Optional Methods</strong></p><ul><li><a href="#TestPicker.preamble-Tuple{TestBlockInterface}"><code>preamble(::MyTestBlock)::Union{Nothing, Expr}</code></a>: Returns additional preamble that the test block might require (default: <code>nothing</code>)</li><li><a href="#TestPicker.expr_transform-Tuple{TestBlockInterface, Expr}"><code>expr_transform(::MyTestBlock, ex::Expr)::Expr</code></a>: Transforms the test block expression before evaluation (default: identity)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Define a custom interface for @test_nowarn blocks
struct NoWarnTestInterface &lt;: TestBlockInterface end

function istestblock(::NoWarnTestInterface, node::SyntaxNode)
    nodes = JuliaSyntax.children(node)
    return !isnothing(nodes) &amp;&amp; !isempty(nodes) &amp;&amp; 
           Expr(first(nodes)) == Symbol(&quot;@test_nowarn&quot;)
end

function blocklabel(::NoWarnTestInterface, node::SyntaxNode)
    return &quot;nowarn: &quot; * JuliaSyntax.sourcetext(JuliaSyntax.children(node)[2])
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblockinterface.jl#L1-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.TestInfo" href="#TestPicker.TestInfo"><code>TestPicker.TestInfo</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TestInfo</code></pre><p>Container for test execution metadata and location information.</p><p>Stores essential information about a test&#39;s source location and context, used for tracking test execution and displaying results.</p><p><strong>Fields</strong></p><ul><li><code>filename::String</code>: Source file containing the test</li><li><code>label::String</code>: Human-readable test identifier (e.g., testset name)</li><li><code>line::Int</code>: Line number where the test begins</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/TestPicker.jl#L21-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.add_interface!-Tuple{TestBlockInterface}" href="#TestPicker.add_interface!-Tuple{TestBlockInterface}"><code>TestPicker.add_interface!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_interface!(interface::TestBlockInterface) -&gt; Vector{TestBlockInterface}</code></pre><p>Register a new test block interface with TestPicker.</p><p>Adds the provided interface to the global <a href="#TestPicker.INTERFACES"><code>INTERFACES</code></a> collection, enabling TestPicker to recognize and process the corresponding test block types. Duplicates are automatically removed to prevent redundant processing.</p><p><strong>Arguments</strong></p><ul><li><code>interface::TestBlockInterface</code>: The interface implementation to register</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{TestBlockInterface}</code>: The updated interfaces collection</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Define a custom interface
struct MyTestInterface &lt;: TestBlockInterface end
# ... implement required methods ...

# Register with TestPicker
add_interface!(MyTestInterface())

# Now TestPicker will recognize your test blocks</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/TestPicker.jl#L120-L146">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.blocklabel-Union{Tuple{T}, Tuple{T, JuliaSyntax.SyntaxNode}} where T&lt;:TestBlockInterface" href="#TestPicker.blocklabel-Union{Tuple{T}, Tuple{T, JuliaSyntax.SyntaxNode}} where T&lt;:TestBlockInterface"><code>TestPicker.blocklabel</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">blocklabel(interface::T, node::SyntaxNode)::String where {T&lt;:TestBlockInterface}</code></pre><p>Generate a descriptive label for a test block to be used in filtering and display.</p><p>This is a required method that must be implemented by all concrete subtypes of <code>TestBlockInterface</code>. It should produce a (preferably) unique label that helps users identify and select specific test blocks.</p><p><strong>Arguments</strong></p><ul><li><code>interface::T</code>: The test block interface implementation  </li><li><code>node::SyntaxNode</code>: The syntax node representing the test block</li></ul><p><strong>Returns</strong></p><ul><li><code>String</code>: A descriptive label for the test block</li></ul><p><strong>Implementation Notes</strong></p><ul><li>Labels should be human-readable and distinctive</li><li>Consider including test names, descriptions, or other identifying information</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># For @testset blocks, extract the test set name:
function blocklabel(::StdTestset, node::SyntaxNode)
    return JuliaSyntax.sourcetext(JuliaSyntax.children(node)[2])
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblockinterface.jl#L72-L99">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.build_info_to_syntax-Tuple{Vector{&lt;:TestBlockInterface}, AbstractString, AbstractVector{&lt;:AbstractString}}" href="#TestPicker.build_info_to_syntax-Tuple{Vector{&lt;:TestBlockInterface}, AbstractString, AbstractVector{&lt;:AbstractString}}"><code>TestPicker.build_info_to_syntax</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">build_info_to_syntax(interfaces, root, matched_files) -&gt; (Dict{TestBlockInfo,SyntaxBlock}, Dict{String,TestBlockInfo})</code></pre><p>Parse matched files and build mapping structures for test block selection and display.</p><p>Extracts all test blocks from the provided files and creates two mappings:</p><ol><li>From test block metadata to syntax information </li><li>From human-readable display strings (for fzf) to test block metadata</li></ol><p><strong>Arguments</strong></p><ul><li><code>interfaces::Vector{&lt;:TestBlockInterface}</code>: Test block interfaces for parsing</li><li><code>root::AbstractString</code>: Root directory path for resolving relative file paths</li><li><code>matched_files::AbstractVector{&lt;:AbstractString}</code>: List of files to parse</li></ul><p><strong>Returns</strong></p><ul><li><code>Tuple{Dict{TestBlockInfo,SyntaxBlock}, Dict{String,TestBlockInfo}}</code>: <ul><li>First element: Maps test block info to syntax blocks</li><li>Second element: Maps formatted display strings to test block info</li></ul></li></ul><p><strong>Notes</strong></p><p>The display strings are formatted with padding for alignment in fzf, showing: <code>&quot;&lt;label&gt; | &lt;filename&gt;:&lt;line_start&gt;-&lt;line_end&gt;&quot;</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblock.jl#L161-L183">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.clean_results_file-Tuple{Pkg.Types.PackageSpec}" href="#TestPicker.clean_results_file-Tuple{Pkg.Types.PackageSpec}"><code>TestPicker.clean_results_file</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>This empty the file before appending new results.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/results_viewer.jl#L195">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.clean_source-Tuple{LineNumberNode}" href="#TestPicker.clean_source-Tuple{LineNumberNode}"><code>TestPicker.clean_source</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Obtain the source from the LineNumberNode.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/results_viewer.jl#L185">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.clear_testenv_cache-Tuple{}" href="#TestPicker.clear_testenv_cache-Tuple{}"><code>TestPicker.clear_testenv_cache</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">clear_testenv_cache()</code></pre><p>Clear the TestEnv cache to force recreation of test environments on next use.</p><p>Empties the <a href="#TestPicker.TESTENV_CACHE"><code>TESTENV_CACHE</code></a> dictionary, which will cause subsequent test evaluations to create fresh test environments. This can be useful when test dependencies have changed or when troubleshooting environment-related issues.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/eval.jl#L12-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.create_repl_test_mode-Tuple{REPL.AbstractREPL, REPL.LineEdit.Prompt}" href="#TestPicker.create_repl_test_mode-Tuple{REPL.AbstractREPL, REPL.LineEdit.Prompt}"><code>TestPicker.create_repl_test_mode</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">create_repl_test_mode(repl::AbstractREPL, main::LineEdit.Prompt) -&gt; LineEdit.Prompt</code></pre><p>Create a new REPL mode specifically for test operations.</p><p>Constructs a custom REPL prompt mode that handles test-specific commands and provides an isolated interface for TestPicker operations. The mode includes proper history support, key bindings, and command processing.</p><p><strong>Arguments</strong></p><ul><li><code>repl::AbstractREPL</code>: The REPL instance to create the mode for</li><li><code>main::LineEdit.Prompt</code>: The main REPL mode to inherit settings from</li></ul><p><strong>Returns</strong></p><ul><li><code>LineEdit.Prompt</code>: The configured test mode prompt ready for use</li></ul><p><strong>Features</strong></p><ul><li>Custom prompt with magenta coloring (if supported)</li><li>Sticky mode behavior for continued test operations</li><li>Integrated history and search functionality</li><li>Error handling for test execution failures</li><li>Automatic return to main mode when appropriate</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/repl.jl#L63-L85">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.current_pkg-Tuple{}" href="#TestPicker.current_pkg-Tuple{}"><code>TestPicker.current_pkg</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">current_pkg() -&gt; PackageSpec</code></pre><p>Get the current package specification from the active Pkg environment.</p><p>This is a more flexible version of <code>current_pkg_name</code> from <code>TestEnv</code> that returns the full <code>PackageSpec</code> object rather than just the package name. This provides access to additional package metadata needed by TestPicker.</p><p><strong>Returns</strong></p><ul><li><code>PackageSpec</code>: The package specification for the current project</li></ul><p><strong>Throws</strong></p><ul><li><code>TestEnvError</code>: If trying to activate test environment of an unnamed project</li></ul><p><strong>Notes</strong></p><p>The function examines the current Pkg context to determine the active package. This is essential for TestPicker to understand which package&#39;s tests are being executed and where to store results.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/common.jl#L1-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.eval_in_module-Tuple{TestPicker.EvalTest, Pkg.Types.PackageSpec}" href="#TestPicker.eval_in_module-Tuple{TestPicker.EvalTest, Pkg.Types.PackageSpec}"><code>TestPicker.eval_in_module</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">eval_in_module(eval_test::EvalTest, pkg::PackageSpec) -&gt; Nothing</code></pre><p>Execute a test block in an isolated module with the appropriate test environment activated.</p><p>This function provides the core test execution functionality for TestPicker. It creates a temporary module, activates the package&#39;s test environment, and evaluates the test code in isolation to prevent interference between different test runs.</p><p><strong>Arguments</strong></p><ul><li><code>eval_test::EvalTest</code>: Contains the test expression and metadata</li><li><code>pkg::PackageSpec</code>: Package specification for environment setup</li></ul><p><strong>Process Overview</strong></p><ol><li><strong>Environment Setup</strong>: Activates test environment (cached or new)</li><li><strong>Module Creation</strong>: Creates isolated module for test execution  </li><li><strong>Code Preparation</strong>: Prepends necessary imports and setup code</li><li><strong>Execution</strong>: Evaluates test in correct directory context with Revise support</li><li><strong>Cleanup</strong>: Restores original environment and cleans temporary module</li></ol><p><strong>Side Effects</strong></p><ul><li>Temporarily changes active Pkg environment</li><li>Creates and cleans up temporary module in Main</li><li>May trigger Revise.revise() for code reloading</li><li>Changes working directory during execution</li><li>Outputs execution information via <code>@info</code></li></ul><p><strong>Environment Management</strong></p><ul><li>Uses <a href="#TestPicker.TESTENV_CACHE"><code>TESTENV_CACHE</code></a> for performance optimization</li><li>Temporarily disables auto-precompilation during setup</li><li>Restores original environment and precompilation settings after execution</li></ul><p><strong>Error Handling</strong></p><ul><li>Ensures environment restoration even if test execution fails</li><li>Cleans up temporary module variables in finally block</li><li>Preserves original working directory</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Execute a test block from an EvalTest object
test = EvalTest(:(using Test; @test 1+1 == 2), TestInfo(&quot;test.jl&quot;, &quot;arithmetic&quot;, 1))
pkg = PackageSpec(name=&quot;MyPackage&quot;, path=&quot;/path/to/package&quot;)
eval_in_module(test, pkg)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/eval.jl#L39-L83">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.expr_transform-Tuple{TestBlockInterface, Expr}" href="#TestPicker.expr_transform-Tuple{TestBlockInterface, Expr}"><code>TestPicker.expr_transform</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">expr_transform(interface::TestBlockInterface, ex::Expr)::Expr</code></pre><p>Transform a test block expression before evaluation.</p><p>This optional method allows test block interfaces to modify the test block expression before it is executed. This can be useful for adding wrapper code, modifying test behavior, or adapting different test formats.</p><p><strong>Arguments</strong></p><ul><li><code>interface::TestBlockInterface</code>: The test block interface implementation</li><li><code>ex::Expr</code>: The test block expression to transform</li></ul><p><strong>Returns</strong></p><ul><li><code>Expr</code>: The transformed expression ready for evaluation</li></ul><p><strong>Default Behavior</strong></p><p>The default implementation returns the expression unchanged (identity transformation).</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Add timing information to test blocks:
function expr_transform(::TimedTestInterface, ex::Expr)
    return quote
        start_time = time()
        result = $ex
        elapsed = time() - start_time
        println(&quot;Test completed in $(elapsed)s&quot;)
        result
    end
end

# Wrap tests in additional error handling:
function expr_transform(::SafeTestInterface, ex::Expr)
    return quote
        try
            $ex
        catch e
            @warn &quot;Test failed with error: $e&quot;
            rethrow()
        end
    end
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblockinterface.jl#L175-L219">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.fzf_testblock-Tuple{Vector{&lt;:TestBlockInterface}, AbstractString, AbstractString}" href="#TestPicker.fzf_testblock-Tuple{Vector{&lt;:TestBlockInterface}, AbstractString, AbstractString}"><code>TestPicker.fzf_testblock</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fzf_testblock(interfaces, fuzzy_file, fuzzy_testset) -&gt; Nothing</code></pre><p>Interactive test block selection and execution workflow using fzf.</p><p>Provides a two-stage fuzzy finding process:</p><ol><li>Filter test files based on <code>fuzzy_file</code> query</li><li>Select specific test blocks from filtered files based on <code>fuzzy_testset</code> query</li></ol><p>Selected test blocks are executed immediately with results saved to the package&#39;s results file. The latest evaluation is stored in <code>LATEST_EVAL[]</code> for reference.</p><p><strong>Arguments</strong></p><ul><li><code>interfaces::Vector{&lt;:TestBlockInterface}</code>: Test block interfaces for parsing</li><li><code>fuzzy_file::AbstractString</code>: Query pattern for filtering test files</li><li><code>fuzzy_testset::AbstractString</code>: Query pattern for filtering test block names</li></ul><p><strong>Side Effects</strong></p><ul><li>Executes selected test blocks</li><li>Updates <code>LATEST_EVAL[]</code> with executed tests</li><li>Cleans and writes to results file</li><li>May modify package test state</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Find and run tests matching &quot;math&quot; files and &quot;addition&quot; test names
fzf_testblock([StdTestset()], &quot;math&quot;, &quot;addition&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblock.jl#L312-L340">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.fzf_testfile-Tuple{AbstractString}" href="#TestPicker.fzf_testfile-Tuple{AbstractString}"><code>TestPicker.fzf_testfile</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fzf_testfile(query::AbstractString) -&gt; Nothing</code></pre><p>Interactive test file selection and execution workflow.</p><p>Combines file selection and execution in a single workflow: uses fzf to select test files based on the query, then runs all selected files in the test environment.</p><p><strong>Arguments</strong></p><ul><li><code>query::AbstractString</code>: Initial search pattern for filtering test files</li></ul><p><strong>Process</strong></p><ol><li>Get current package context</li><li>Present fzf interface for file selection</li><li>Execute all selected test files</li><li>Handle results and error reporting</li></ol><p><strong>Side Effects</strong></p><ul><li>Updates <code>LATEST_EVAL[]</code> with executed tests</li><li>Clears and populates results file with any failures/errors</li><li>May modify test environment state</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Run tests matching &quot;integration&quot;
fzf_testfile(&quot;integration&quot;)

# Run all test files (empty query shows all)
fzf_testfile(&quot;&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testfile.jl#L102-L132">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.get_matching_files-Tuple{AbstractString, AbstractVector{&lt;:AbstractString}}" href="#TestPicker.get_matching_files-Tuple{AbstractString, AbstractVector{&lt;:AbstractString}}"><code>TestPicker.get_matching_files</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_matching_files(file_query::AbstractString, test_files::AbstractVector{&lt;:AbstractString}) -&gt; Vector{String}</code></pre><p>Filter test files using fzf&#39;s non-interactive filtering based on the given query.</p><p>Uses <code>fzf --filter</code> to perform fuzzy matching on the provided list of test files, returning only those that match the query pattern.</p><p><strong>Arguments</strong></p><ul><li><code>file_query::AbstractString</code>: Fuzzy search pattern to match against file names</li><li><code>test_files::AbstractVector{&lt;:AbstractString}</code>: List of test file paths to filter</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{String}</code>: List of file paths that match the query</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">files = [&quot;test/test_math.jl&quot;, &quot;test/test_string.jl&quot;, &quot;test/integration.jl&quot;]
get_matching_files(&quot;math&quot;, files)  # Returns [&quot;test/test_math.jl&quot;]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblock.jl#L105-L125">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.get_preview_dimension" href="#TestPicker.get_preview_dimension"><code>TestPicker.get_preview_dimension</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Utility function to adapt the size of the text width and line position.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/results_viewer.jl#L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.get_test_files" href="#TestPicker.get_test_files"><code>TestPicker.get_test_files</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_test_files(pkg::PackageSpec=current_pkg()) -&gt; (String, Vector{String})</code></pre><p>Discover and return all Julia test files for a package.</p><p>Recursively searches the package&#39;s test directory to find all <code>.jl</code> files, returning both the test directory path and the collection of relative file paths.</p><p><strong>Arguments</strong></p><ul><li><code>pkg::PackageSpec</code>: Package specification (defaults to current package)</li></ul><p><strong>Returns</strong></p><ul><li><code>Tuple{String, Vector{String}}</code>: <ul><li>First element: Absolute path to the test directory</li><li>Second element: Vector of test file paths relative to test directory</li></ul></li></ul><p><strong>Notes</strong></p><ul><li>Only includes files with <code>.jl</code> extension</li><li>Searches recursively through subdirectories</li><li>File paths are normalized and relative to test directory root</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">test_dir, files = get_test_files()
# test_dir: &quot;/path/to/MyPackage/test&quot;
# files: [&quot;runtests.jl&quot;, &quot;subdir/test_math.jl&quot;, &quot;test_utils.jl&quot;]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testfile.jl#L56-L83">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.get_testblocks-Tuple{Vector{&lt;:TestBlockInterface}, AbstractString}" href="#TestPicker.get_testblocks-Tuple{Vector{&lt;:TestBlockInterface}, AbstractString}"><code>TestPicker.get_testblocks</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_testblocks(interfaces::Vector{&lt;:TestBlockInterface}, file::AbstractString) -&gt; Vector{SyntaxBlock}</code></pre><p>Parse a Julia file and extract all test blocks with their associated preamble statements.</p><p>For each test block found (including nested ones), collects all preceding preamble  statements that should be executed before the test block. Uses the provided interfaces to determine what constitutes a test block.</p><p><strong>Arguments</strong></p><ul><li><code>interfaces::Vector{&lt;:TestBlockInterface}</code>: Collection of test block interfaces to use for parsing</li><li><code>file::AbstractString</code>: Path to the Julia file to parse</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{SyntaxBlock}</code>: Collection of parsed test blocks with their preambles</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblock.jl#L60-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.identify_query-Tuple{AbstractString}" href="#TestPicker.identify_query-Tuple{AbstractString}"><code>TestPicker.identify_query</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">identify_query(input::AbstractString) -&gt; (QueryType, Tuple)</code></pre><p>Parse user input in test mode and identify the type of operation requested.</p><p>Analyzes the input string to determine what kind of test operation the user wants to perform and extracts the relevant parameters for that operation.</p><p><strong>Arguments</strong></p><ul><li><code>input::AbstractString</code>: The raw input from the test mode REPL</li></ul><p><strong>Returns</strong></p><ul><li><code>Tuple{QueryType, Tuple}</code>: The query type and associated parameters</li></ul><p><strong>Query Formats</strong></p><ul><li><code>&quot;-&quot;</code>: Re-run latest evaluation (returns <code>LatestEval</code> with stored tests)</li><li><code>&quot;?&quot;</code>: Inspect test results (returns <code>InspectResults</code> with empty tuple)  </li><li><code>&quot;file:testset&quot;</code>: Run specific test set (returns <code>TestsetQuery</code> with file and testset)</li><li><code>&quot;filename&quot;</code>: Run tests from file (returns <code>TestFileQuery</code> with filename and empty testset)</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">identify_query(&quot;test_math.jl&quot;)           # (TestFileQuery, (&quot;test_math.jl&quot;, &quot;&quot;))
identify_query(&quot;test_math.jl:addition&quot;)  # (TestsetQuery, (&quot;test_math.jl&quot;, &quot;addition&quot;))
identify_query(&quot;-&quot;)                      # (LatestEval, &lt;previous_tests&gt;)
identify_query(&quot;?&quot;)                      # (InspectResults, ())</code></pre><p><strong>Error Handling</strong></p><ul><li>Returns <code>UnmatchedQuery</code> for inputs that cannot be parsed</li><li>Handles case where no previous evaluation exists for &quot;-&quot; command</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/repl.jl#L155-L186">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.init_test_repl_mode-Tuple{REPL.AbstractREPL}" href="#TestPicker.init_test_repl_mode-Tuple{REPL.AbstractREPL}"><code>TestPicker.init_test_repl_mode</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">init_test_repl_mode(repl::AbstractREPL) -&gt; Nothing</code></pre><p>Initialize and add test mode to the REPL interface.</p><p>Sets up a custom REPL mode for TestPicker that can be accessed by typing &#39;!&#39; at the beginning of a line. The test mode provides specialized commands for running and inspecting tests interactively.</p><p><strong>Arguments</strong></p><ul><li><code>repl::AbstractREPL</code>: The REPL instance to modify</li></ul><p><strong>Side Effects</strong></p><ul><li>Adds a new test mode to the REPL interface</li><li>Modifies the main mode&#39;s keymap to include the trigger</li><li>Sets up mode switching behavior and key bindings</li></ul><p><strong>Notes</strong></p><p>The test mode supports:</p><ul><li>Standard REPL features (history, search, etc.)</li><li>Custom test commands and query parsing</li><li>Seamless switching between main and test modes</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/repl.jl#L8-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.ispreamble-Tuple{JuliaSyntax.SyntaxNode}" href="#TestPicker.ispreamble-Tuple{JuliaSyntax.SyntaxNode}"><code>TestPicker.ispreamble</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ispreamble(node::SyntaxNode) -&gt; Bool</code></pre><p>Check if a statement qualifies as a preamble that should be executed before test blocks.</p><p>A preamble statement is any statement that sets up the testing environment, such as:</p><ul><li>Function calls (<code>:call</code>)</li><li>Import/using statements (<code>:using</code>, <code>:import</code>)  </li><li>Variable assignments (<code>:=</code>)</li><li>Macro calls (<code>:macrocall</code>)</li><li>Function definitions (<code>:function</code>)</li></ul><p><strong>Arguments</strong></p><ul><li><code>node::SyntaxNode</code>: The syntax node to check</li></ul><p><strong>Returns</strong></p><ul><li><code>Bool</code>: <code>true</code> if the node represents a preamble statement, <code>false</code> otherwise</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># These would return true:
using Test
import MyModule
x = 10
@testset &quot;setup&quot; begin end
function helper() end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblock.jl#L2-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.istestblock-Union{Tuple{T}, Tuple{T, JuliaSyntax.SyntaxNode}} where T&lt;:TestBlockInterface" href="#TestPicker.istestblock-Union{Tuple{T}, Tuple{T, JuliaSyntax.SyntaxNode}} where T&lt;:TestBlockInterface"><code>TestPicker.istestblock</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">istestblock(interface::T, node::SyntaxNode)::Bool where {T&lt;:TestBlockInterface}</code></pre><p>Determine whether a syntax node represents a test block according to the given interface.</p><p>This is a required method that must be implemented by all concrete subtypes of <code>TestBlockInterface</code>. It examines a syntax node and decides whether it represents a test block that should be recognized by TestPicker.</p><p><strong>Arguments</strong></p><ul><li><code>interface::T</code>: The test block interface implementation</li><li><code>node::SyntaxNode</code>: The syntax node to examine</li></ul><p><strong>Returns</strong></p><ul><li><code>Bool</code>: <code>true</code> if the node represents a test block, <code>false</code> otherwise</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># For @testset blocks:
function istestblock(::StdTestset, node::SyntaxNode)
    nodes = JuliaSyntax.children(node)
    return !isnothing(nodes) &amp;&amp; !isempty(nodes) &amp;&amp; 
           Expr(first(nodes)) == Symbol(&quot;@testset&quot;)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblockinterface.jl#L42-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.pick_testblock-Tuple{Dict{String, TestPicker.TestBlockInfo}, AbstractString, AbstractString}" href="#TestPicker.pick_testblock-Tuple{Dict{String, TestPicker.TestBlockInfo}, AbstractString, AbstractString}"><code>TestPicker.pick_testblock</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">pick_testblock(tabled_keys, testset_query, root) -&gt; Vector{String}</code></pre><p>Present an interactive fzf interface for selecting test blocks to execute.</p><p>Launches fzf with a preview window (using bat) that allows users to select one or more test blocks from the filtered list. The preview shows the actual test code with syntax highlighting.</p><p><strong>Arguments</strong></p><ul><li><code>tabled_keys::Dict{String,TestBlockInfo}</code>: Mapping from display strings to test block info</li><li><code>testset_query::AbstractString</code>: Initial query to filter test block names</li><li><code>root::AbstractString</code>: Root directory for file path resolution</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{String}</code>: List of selected display strings corresponding to chosen test blocks</li></ul><p><strong>Features</strong></p><ul><li>Multi-selection enabled (<code>-m</code> flag)</li><li>Preview window shows test code with syntax highlighting</li><li>Initial query pre-filters results</li><li>Search limited to visible test labels (not file paths)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblock.jl#L218-L240">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.preamble-Tuple{TestBlockInterface}" href="#TestPicker.preamble-Tuple{TestBlockInterface}"><code>TestPicker.preamble</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">preamble(interface::TestBlockInterface)::Union{Nothing, Expr}</code></pre><p>Return additional preamble code specific to the test block interface.</p><p>This optional method allows test block interfaces to specify setup code that should be executed before any test blocks of this type. Common uses include importing required packages or setting up test environment variables.</p><p><strong>Arguments</strong></p><ul><li><code>interface::TestBlockInterface</code>: The test block interface implementation</li></ul><p><strong>Returns</strong></p><ul><li><code>Union{Nothing, Expr}</code>: Preamble expression to execute, or <code>nothing</code> if no preamble needed</li></ul><p><strong>Default Behavior</strong></p><p>The default implementation returns <code>nothing</code>, indicating no additional preamble is required.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># StdTestset requires Test.jl to be loaded:
function preamble(::StdTestset)
    return :(using Test)
end

# Custom interface might need multiple setup steps:
function preamble(::MyCustomInterface)
    return quote
        using Test, Random
        Random.seed!(1234)
    end
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblockinterface.jl#L104-L137">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.prepend_ex-Tuple{Any, Expr}" href="#TestPicker.prepend_ex-Tuple{Any, Expr}"><code>TestPicker.prepend_ex</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">prepend_ex(ex, new_line::Expr) -&gt; Expr</code></pre><p>Prepend a new expression to an existing expression, handling block structure appropriately.</p><p>If the target expression is already a block, the new expression is prepended to the beginning of the block. Otherwise, a new block is created containing both expressions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/eval.jl#L23-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.prepend_preamble_statements-Tuple{TestBlockInterface, Vector{Expr}}" href="#TestPicker.prepend_preamble_statements-Tuple{TestBlockInterface, Vector{Expr}}"><code>TestPicker.prepend_preamble_statements</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">prepend_preamble_statements(interface::TestBlockInterface, preambles::Vector{Expr}) -&gt; Vector{Expr}</code></pre><p>Combine interface-specific preamble with existing preamble statements.</p><p>Takes the preamble from the interface (if any) and prepends it to the existing collection of preamble statements, ensuring interface requirements are satisfied before test execution.</p><p><strong>Arguments</strong></p><ul><li><code>interface::TestBlockInterface</code>: The test block interface implementation</li><li><code>preambles::Vector{Expr}</code>: Existing preamble statements from the test file</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{Expr}</code>: Combined preamble statements with interface preamble first</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">interface = StdTestset()
existing = [:(x = 1), :(y = 2)]
result = prepend_preamble_statements(interface, existing)
# Returns: [:(using Test), :(x = 1), :(y = 2)]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblockinterface.jl#L142-L165">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.preview_content-Tuple{Test.Error}" href="#TestPicker.preview_content-Tuple{Test.Error}"><code>TestPicker.preview_content</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>We connect the error with the backtrace to be previewed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/results_viewer.jl#L172">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.remove_ansi-Tuple{AbstractString}" href="#TestPicker.remove_ansi-Tuple{AbstractString}"><code>TestPicker.remove_ansi</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>File names come with ansi characters and break stuff...</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/results_viewer.jl#L154">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.replace_interface!-Tuple{TestBlockInterface}" href="#TestPicker.replace_interface!-Tuple{TestBlockInterface}"><code>TestPicker.replace_interface!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">replace_interface!(interface::TestBlockInterface) -&gt; Vector{TestBlockInterface}</code></pre><p>Similar to <code>add_interface!</code> but empty the interface first before adding the new one so that it becomes the unique interface.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/TestPicker.jl#L149-L153">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.run_test_file-Tuple{AbstractString, Pkg.Types.PackageSpec}" href="#TestPicker.run_test_file-Tuple{AbstractString, Pkg.Types.PackageSpec}"><code>TestPicker.run_test_file</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">run_test_file(file::AbstractString, pkg::PackageSpec) -&gt; Any</code></pre><p>Execute a single test file in an isolated testset within the package test environment.</p><p>Wraps the test file in a testset named after the package and file, handles test failures gracefully, and updates the global test state for later inspection.</p><p><strong>Arguments</strong></p><ul><li><code>file::AbstractString</code>: Path to the test file to execute</li><li><code>pkg::PackageSpec</code>: Package specification for environment and naming</li></ul><p><strong>Process</strong></p><ol><li>Creates a testset named &quot;{package} - {file}&quot;</li><li>Includes the test file within the testset</li><li>Catches and saves any test failures/errors</li><li>Updates <code>LATEST_EVAL[]</code> with the test execution</li><li>Evaluates in isolated module environment</li></ol><p><strong>Test Structure</strong></p><p>The file is executed within this structure:</p><pre><code class="language-julia hljs">@testset &quot;PackageName - filepath&quot; begin
    include(&quot;filepath&quot;)
end</code></pre><p><strong>Side Effects</strong></p><ul><li>Updates or initializes <code>LATEST_EVAL[]</code> global state</li><li>May save test results to results file on failures</li><li>Executes file in test environment context</li></ul><p><strong>Error Handling</strong></p><ul><li>Test failures are caught and saved rather than propagated</li><li>Non-test errors are re-thrown</li><li>File-level errors are properly contextualized</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testfile.jl#L184-L220">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.run_test_files-Tuple{AbstractVector{&lt;:AbstractString}, Pkg.Types.PackageSpec}" href="#TestPicker.run_test_files-Tuple{AbstractVector{&lt;:AbstractString}, Pkg.Types.PackageSpec}"><code>TestPicker.run_test_files</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">run_test_files(files::AbstractVector{&lt;:AbstractString}, pkg::PackageSpec) -&gt; Nothing</code></pre><p>Execute a collection of test files in the package test environment.</p><p>Runs each provided test file in sequence, handling errors gracefully and updating the test evaluation state. Each file is wrapped in a testset and executed in isolation.</p><p><strong>Arguments</strong></p><ul><li><code>files::AbstractVector{&lt;:AbstractString}</code>: Full paths to test files to execute</li><li><code>pkg::PackageSpec</code>: Package specification for test environment context</li></ul><p><strong>Behavior</strong></p><ul><li>Returns early if no files provided (preserves existing <code>LATEST_EVAL</code> state)</li><li>Resets <code>LATEST_EVAL[]</code> to empty array for new test run</li><li>Clears results file before execution</li><li>Validates file existence before attempting execution</li><li>Continues execution even if individual files fail</li></ul><p><strong>Side Effects</strong></p><ul><li>Modifies <code>LATEST_EVAL[]</code> global state</li><li>Clears and populates results file</li><li>May output error messages for missing files</li></ul><p><strong>Error Handling</strong></p><ul><li>Validates file paths before execution</li><li>Reports missing files as errors with bug report guidance</li><li>Individual file failures don&#39;t stop batch execution</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testfile.jl#L139-L167">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.save_test_results-Tuple{Test.TestSetException, TestPicker.TestInfo, Pkg.Types.PackageSpec}" href="#TestPicker.save_test_results-Tuple{Test.TestSetException, TestPicker.TestInfo, Pkg.Types.PackageSpec}"><code>TestPicker.save_test_results</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">save_test_results(testset::Test.TestSetException, testinfo::TestInfo, pkg::PackageSpec) -&gt; Nothing</code></pre><p>Save test failures and errors from a test set to the package&#39;s results file.</p><p>Processes a test set exception containing failed and errored tests, formats them for display in the results viewer, and appends them to the package&#39;s results file. Each test result includes the test description, source location, detailed error information, and context.</p><p><strong>Arguments</strong></p><ul><li><code>testset::Test.TestSetException</code>: Exception containing failed/errored tests</li><li><code>testinfo::TestInfo</code>: Information about the test block that was executed</li><li><code>pkg::PackageSpec</code>: Package specification for file organization</li></ul><p><strong>File Format</strong></p><p>Each test result is stored as a line with components separated by <a href="#TestPicker.separator-Tuple{}"><code>separator()</code></a>:</p><ol><li>Test description (from <code>list_view</code>)</li><li>Cleaned source location (from <code>clean_source</code>)</li><li>Detailed error content (from <code>preview_content</code>)</li><li>Test context (from <code>context</code>)</li></ol><p><strong>Side Effects</strong></p><ul><li>Creates results file if it doesn&#39;t exist</li><li>Appends new results to existing file content</li><li>Results are null-separated for fzf compatibility</li></ul><p><strong>Notes</strong></p><p>Results are formatted specifically for consumption by <a href="#TestPicker.visualize_test_results"><code>visualize_test_results</code></a> and the fzf-based results viewer interface.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/results_viewer.jl#L200-L230">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.select_test_files" href="#TestPicker.select_test_files"><code>TestPicker.select_test_files</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">select_test_files(query::AbstractString, pkg::PackageSpec=current_pkg()) -&gt; Vector{String}</code></pre><p>Interactively select test files using fzf based on a fuzzy search query.</p><p>Presents an fzf interface showing all test files for the package, with syntax-highlighted preview using bat. Users can select multiple files and the query pre-filters the results.</p><p><strong>Arguments</strong></p><ul><li><code>query::AbstractString</code>: Initial fuzzy search pattern for filtering test files</li><li><code>pkg::PackageSpec</code>: Package specification (defaults to current package)</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{String}</code>: Full paths to selected test files, empty if no selection made</li></ul><p><strong>Features</strong></p><ul><li>Multi-selection enabled (can choose multiple test files)</li><li>Syntax-highlighted preview of file contents</li><li>Pre-filtered results based on initial query</li><li>Returns full absolute paths ready for execution</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Select test files matching &quot;math&quot;
files = select_test_files(&quot;math&quot;)

# Select from specific package
pkg = PackageSpec(name=&quot;MyPackage&quot;)
files = select_test_files(&quot;integration&quot;, pkg)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testfile.jl#L1-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.separator-Tuple{}" href="#TestPicker.separator-Tuple{}"><code>TestPicker.separator</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Separator used by <code>fzf</code> to distinguish the different data components.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/results_viewer.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.test_mode_do_cmd-Tuple{REPL.AbstractREPL, String}" href="#TestPicker.test_mode_do_cmd-Tuple{REPL.AbstractREPL, String}"><code>TestPicker.test_mode_do_cmd</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">test_mode_do_cmd(repl::AbstractREPL, input::String) -&gt; Nothing</code></pre><p>Execute test commands received in the test REPL mode.</p><p>Processes user input from the test mode, identifies the requested operation, and dispatches to the appropriate test execution or inspection function.</p><p><strong>Arguments</strong></p><ul><li><code>repl::AbstractREPL</code>: The REPL instance for result visualization</li><li><code>input::String</code>: The command string entered by the user</li></ul><p><strong>Commands Supported</strong></p><ul><li>File queries: Run tests from matching files using fuzzy search</li><li>Testset queries: Run specific test sets using file:testset syntax</li><li>Latest evaluation: Re-run previously executed tests with &quot;-&quot;</li><li>Result inspection: View test results with &quot;?&quot;</li></ul><p><strong>Side Effects</strong></p><ul><li>May execute test code and modify package environments</li><li>Updates the latest evaluation cache</li><li>Can display test results in the REPL</li><li>Outputs informational messages and errors</li></ul><p><strong>Error Handling</strong></p><ul><li>Catches and reports <code>TestSetException</code> errors from test execution</li><li>Provides warning for non-interactive usage</li><li>Handles unrecognized query formats</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># In test mode:
# &quot;math&quot;              # Run tests from files matching &quot;math&quot;
# &quot;test_calc.jl:add&quot;  # Run &quot;add&quot; testset from test_calc.jl
# &quot;-&quot;                 # Re-run last tests
# &quot;?&quot;                 # View test results</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/repl.jl#L207-L244">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.testblock_list-Tuple{Vector{&lt;:AbstractString}, Dict{TestPicker.TestBlockInfo, TestPicker.SyntaxBlock}, Dict{String, TestPicker.TestBlockInfo}, Pkg.Types.PackageSpec}" href="#TestPicker.testblock_list-Tuple{Vector{&lt;:AbstractString}, Dict{TestPicker.TestBlockInfo, TestPicker.SyntaxBlock}, Dict{String, TestPicker.TestBlockInfo}, Pkg.Types.PackageSpec}"><code>TestPicker.testblock_list</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">testblock_list(choices, info_to_syntax, display_to_info, pkg) -&gt; Vector{EvalTest}</code></pre><p>Convert user-selected test block choices into executable test objects.</p><p>Takes the selected display strings from fzf and converts them into <code>EvalTest</code> objects that can be evaluated. Each test is wrapped in a try-catch block to handle test failures gracefully and save results.</p><p><strong>Arguments</strong></p><ul><li><code>choices::Vector{&lt;:AbstractString}</code>: Selected display strings from fzf</li><li><code>info_to_syntax::Dict{TestBlockInfo,SyntaxBlock}</code>: Mapping from test info to syntax blocks</li><li><code>display_to_info::Dict{String,TestBlockInfo}</code>: Mapping from display strings to test info</li><li><code>pkg::PackageSpec</code>: Package specification for test context</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector{EvalTest}</code>: Collection of executable test objects ready for evaluation</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/testblock.jl#L267-L284">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="TestPicker.visualize_test_results" href="#TestPicker.visualize_test_results"><code>TestPicker.visualize_test_results</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">visualize_test_results(repl::AbstractREPL=Base.active_repl, pkg::PackageSpec=current_pkg()) -&gt; Nothing</code></pre><p>Interactive visualization of test failures and errors using fzf interface.</p><p>Creates a loop-based interface for browsing test failures and errors from the most recent test execution. Provides syntax-highlighted previews of stack traces and allows editing of test files directly from the interface.</p><p><strong>Arguments</strong></p><ul><li><code>repl::AbstractREPL</code>: REPL instance for terminal operations (defaults to active REPL)</li><li><code>pkg::PackageSpec</code>: Package specification for locating results (defaults to current package)</li></ul><p><strong>Features</strong></p><ul><li><strong>Two-level navigation</strong>: <ol><li>Browse failed/errored tests with stack trace preview</li><li>Drill down into stack traces with source code preview</li></ol></li><li><strong>Syntax highlighting</strong>: Uses bat for colored display of Julia code</li><li><strong>Editor integration</strong>: <code>Ctrl+e</code> opens files in configured editor</li><li><strong>Source location</strong>: Shows relevant source code around error locations</li></ul><p><strong>Interface Controls</strong></p><ul><li><strong>Main view</strong>:<ul><li><code>Enter</code>: Drill down into stack trace for selected test</li><li><code>Ctrl+e</code>: Edit the test file</li><li><code>Esc</code>: Exit the viewer</li></ul></li><li><strong>Stack trace view</strong>:<ul><li><code>Ctrl+e</code>: Edit source file at specific line</li><li><code>Esc</code>: Return to main test view</li></ul></li></ul><p><strong>Prerequisites</strong></p><ul><li>Test results file must exist (created by running tests with failures/errors)</li><li>External dependencies: <code>fzf</code>, <code>bat</code>, configured editor</li></ul><p><strong>Error Handling</strong></p><ul><li>Warns if no results file exists</li><li>Gracefully handles missing stack traces for simple failures</li><li>Continues operation if source files cannot be located</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># View results for current package
visualize_test_results()

# View results for specific package
pkg = PackageSpec(name=&quot;MyPackage&quot;)
visualize_test_results(Base.active_repl, pkg)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/theogf/TestPicker.jl/blob/45fe8045ebe32b33335adef06bcf98656367bb84/src/results_viewer.jl#L13-L61">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Monday 30 June 2025 20:59">Monday 30 June 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
